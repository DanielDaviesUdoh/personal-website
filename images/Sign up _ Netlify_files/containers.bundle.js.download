"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2244],{50961:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(74512),o=n(32735),i=n(15062),a=n(95559),l=n(41547),s=n(55678),u=n(71335),c=n(79265),d=n(69165),g=n(24327);let p=e=>Math.floor(new Date().getTime()/1e3)-86400*e,f=(0,i.$j)(function(e,{site:t,account:n}){return{paymentMethod:(0,u.DY)(e,n),paymentProvider:(0,l.nY)(n),pageviews:(0,a.PO)(e,t),uniqueVisitors:(0,a.lW)(e,t),topLocations:(0,a.Z$)(e,t),topSources:(0,a.nV)(e,t),topPages:(0,a.gg)(e,t),bandwidthUsed:(0,a.Tf)(e,t),notFound:(0,a.p_)(e,t),summary:(0,a.mq)(e,t),realUserMetrics:{enabled:t.get("rum_enabled")||!1,filterSelected:(0,c.ot)(),FCP:(0,c.Pn)(e,t,"FCP"),LCP:(0,c.Pn)(e,t,"LCP"),FID:(0,c.Pn)(e,t,"FID"),INP:(0,c.Pn)(e,t,"INP"),CLS:(0,c.Pn)(e,t,"CLS")},filterSelected:(0,a._$)()}},function(e,{account:t,site:n,hasCharts:r,apiVersion:o}){return{onEnable:t=>e((0,a.Dc)(t)),onEnableRUM:t=>{e((0,d.L3)(t,{rum_enabled:!0})).then(()=>{e((0,c.bF)(t,"FCP")),e((0,c.bF)(t,"LCP")),e((0,c.bF)(t,"FID")),e((0,c.bF)(t,"INP")),e((0,c.bF)(t,"CLS"))})},onDisableRUM:t=>{e((0,d.L3)(t,{rum_enabled:!1}))},onLoad:()=>{r&&n.get("analytics_instance_id")?(e((0,a.Te)(n)),e((0,a.Pc)(n)),e((0,a.mE)(n)),e((0,a.bc)(n)),e((0,a.Ww)(n)),e((0,a.Wo)(n)),e((0,a.XF)(n))):e((0,u.nS)(t)),r&&n.get("rum_enabled")&&(e((0,c.bF)(n,"FCP")),e((0,c.bF)(n,"LCP")),e((0,c.bF)(n,"FID")),e((0,c.bF)(n,"INP")),e((0,c.bF)(n,"CLS")),e((0,s.lZ)(n,{filter:n.getIn(["build_settings","repo_branch"]),state:"ready",from:p(7)})))},onPaymentProviderTokenUsed:n=>e((0,l.Uc)(t,n)),onSavePaymentMethod:n=>e((0,u.BX)(n,t)),onUpdateFilter:(t,{resolution:n,days:r,minusOffsetDays:o})=>{e((0,a.Te)(t,{resolution:n,days:r,minusOffsetDays:o})),e((0,a.Pc)(t,{resolution:n,days:r,minusOffsetDays:o})),e((0,a.Wo)(t,{resolution:n,days:r,minusOffsetDays:o})),e((0,a.Ww)(t,{resolution:n,days:r,minusOffsetDays:o})),e((0,a.bc)(t,{resolution:n,days:r,minusOffsetDays:o})),e((0,a.XF)(t,{resolution:n,days:r,minusOffsetDays:o})),e((0,a.mE)(t,{resolution:n,days:r,minusOffsetDays:o}))},onUpdateRUMFilter:(t,{resolution:n,days:r,minusOffsetDays:o},i)=>{e((0,c.bF)(t,"FCP",{resolution:"hour",days:r},i)),e((0,c.bF)(t,"FID",{resolution:"hour",days:r},i)),e((0,c.bF)(t,"LCP",{resolution:"hour",days:r},i)),e((0,c.bF)(t,"INP",{resolution:"hour",days:r},i)),e((0,c.bF)(t,"CLS",{resolution:"hour",days:r},i)),e((0,s.lZ)(t,{filter:t.getIn(["build_settings","repo_branch"]),state:"ready",from:p(r)}))},onDelete:t=>e((0,a.Ji)(t))}})(e=>{let{setIsLoadingApp:t}=(0,g.bn)(),{site:n,Component:i}=e,a=n.get("analytics_instance_id");return(0,o.useEffect)(()=>{e.onLoad(e),t(!1)},[a,t]),(0,r.jsx)(i,{...e})})},11433:(e,t,n)=>{let r;n.d(t,{Z:()=>eI,Q:()=>eZ});var o=n(74512);n(10868);var i=n(48292),a=n(38624),l=n(88601),s=n(32735),u=n(15062),c=n(42881),d=n(6680),g=n(49207),p=n(13743),f=n(35812),v=n(41547),m=n(55678),h=n(17479),w=n(21609),b=n(57617),y=n(69165),x=n(5330),S=n(31316),_=n(95045),j=n(2576),L=n(69612),k=n(53645),P=n(59749),Z=n(98680),E=n(30931),D=n(68138),I=n(12273),N=n(70509),F=n(40290),C=n(31351),R=n(15174),$=n(89294),T=n(6280),U=n(93249),z=n(23711),A=n(31022);let M=(0,u.$j)(function(e){return{a11yMessage:(0,S._P)(e)}},{setLoading:S.K4,setA11yMessage:S.FY})(e=>{let[t,n]=(0,s.useState)(""),r=({a11yMessage:e})=>{e&&(setTimeout(()=>{n(e)},50),setTimeout(()=>{n("")},500))};return(0,s.useEffect)(()=>{r(e)},[e]),(0,o.jsx)("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"tw-sr-only",children:t})});var W=n(71711),B=n(96971),O=n(4758);let q=function({account:e,router:t}){var n,r;let{deployPath:i,firstDeployModal:a,site:l}=(0,u.v9)(e=>{var t,n;let r=e.ui.getIn(["ui","firstDeployModal"]),o=(0,y.gG)(e,null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.site_id);return{deployPath:(0,B.DD)(o,"deploys",null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.id),firstDeployModal:r,site:null==o?void 0:o.toJS()}}),c=(null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.state)==="ready",d=(0,u.I0)(),g=window.location.pathname===i,p=null==a?void 0:a.show,f=null==a?void 0:null===(r=a.data)||void 0===r?void 0:r.site_id;return(0,s.useEffect)(()=>{p&&_.iND.appFirstDeployModalDisplayed({site_id:f,pageUrlPath:window.location.pathname,success:c})},[p,f,c]),p?(0,o.jsx)(W.Z,{site:l,onHide:e=>{e!==O.Ct.onSubmit&&_.iND.appFirstDeployModalInteraction({modalInteraction:"dismissed"}),d((0,S.Ic)())},onSave:()=>{_.iND.appFirstDeployModalInteraction({modalInteraction:"primaryCtaClicked"}),!g&&i?t.push(i):t.push((0,B.l_)(e))},isOnDeployPage:g,success:c}):null};var K=n(60377),H=n(21116),V=n(48693),G=n(8215),J=n(86837),X=n(24327),Y=n(36597),Q=n(72850),ee=n(32864),et=n(61345),en=n(49659),er=n(42977),eo=n(93061),ei=n(57553),ea=n(16505),el=n(21297),es=n(55155),eu=n(30327),ec=n(61004),ed=n(26703),eg=n(1958),ep=n(66083),ef=n(91084),ev=n(7205),em=n(43239),eh=n(98406),ew=n(93370),eb=n(42409),ey=n(67587),ex=n(79784),eS=n(70851),e_=n(6933);let ej="isNavCollapsed",eL="",ek="",eP=()=>!0;function eZ(e,t=window.location.pathname){var n;let{account:r,site:o,params:i}=e,[a,l,s]=(0,B.fR)(t,i).slice(0,3),u=null===(n=eu.EO[a])||void 0===n?void 0:n.find(e=>e.key===l),c=null==u?void 0:u.isVisible;if((null==u?void 0:u.subNavigation)&&s){let e=u.subNavigation.find(e=>e.key===s);c=null==e?void 0:e.isVisible}return c||(c=eP),c({account:r,site:o})}function eE(){if(!(0,ec.St)("tracking_session_id")){let e=crypto.randomUUID();(0,ec.D9)("tracking_session_id",e)}}function eD(){(0,ec.St)("tracking_session_id")&&(0,ec.lD)("tracking_session_id")}let eI=(0,i.T_)({sdkKey:"dvc_client_7b35e45b_dd67_444b_b114_46804faa770d_ab0f202",options:{apiProxyURL:"https://featureflags.netlify.com",deferInitialization:!0}})((0,d.qC)((0,u.$j)((e,{params:t,routes:n,location:r,children:o})=>{var i,a,l,s;let{name:u,account_slug:c,organization_slug:d}=t,m=(0,y.lH)(e,u),h=(0,f.HF)(e),x=(0,g.L3)(e),_=c||m&&m.get("account_slug"),j=_&&(0,g.bk)(e,_)||(0,g.uW)(e),L=(0,S.Jh)(e,_);!t.account_slug&&(null==j?void 0:j.get("slug"))&&!t.name&&(t.account_slug=j.get("slug"));let k=d?null:(0,b.Hh)(e),P=null==j?void 0:j.get("organization_id"),Z=d?(0,b.mT)(e,d):null==k?void 0:k.find(e=>e.get("id")===P),E=(0,eu.Ti)({pathname:r.pathname,params:t,account:j,site:m}),D=n.map(e=>e.path).filter(Boolean).pop(),I=[...n].pop(),N=null==I?void 0:I.excludeAppNav,F=null==I?void 0:I.excludeSecondaryNav,{hideAppSwitcher:C}=I||{};if(!(null==o?void 0:null===(i=o.props)||void 0===i?void 0:i.route))throw Error("Children of <App> must be a route");(0,ep.VF)(j)&&(F=!0),(0,ep.kL)(j)&&(F=!0),(null==o?void 0:null===(s=o.props)||void 0===s?void 0:null===(l=s.route)||void 0===l?void 0:null===(a=l.component)||void 0===a?void 0:a.excludeAppNav)&&!(null==h?void 0:h.get("id"))&&(N=!0);let R=!!h&&!!j,$="/"===r.pathname&&j&&(0,B.l_)(j),T=$&&r.search?`${$}${r.search}`:$,U=(0,S.jS)(e),z=(0,v.xm)(e);return{isAuthViewReady:R,user:h,site:m,sitesNavList:L,params:t,account:j,accounts:x,api:(0,p.ac)(e),organization:Z,organizations:k,navigation:E,redirect:T,backTo:function({routes:e,location:t,params:n,navigation:r}){var o;let{pathname:i,search:a}=t,l=(0,B.fR)(i,n)[1],s=(null===(o=e[e.length-1])||void 0===o?void 0:o.back)?null==r?void 0:r.find(e=>e.key===l):void 0;return s&&[ea.Z6.TEAM_PLUGINS].some(e=>(0,B.LX)(e,s.path))?s:s&&{...s,path:`/${(0,B.Kn)(i).slice(0,-1).join("/")}${a}`}}({routes:n,location:r,params:t,navigation:E}),userId:h&&h.get("id")||null,notifications:(0,w._6)(e),lastNotificationReadAt:(0,w.P$)(e),excludeAppNav:N,excludeSecondaryNav:F,routePath:D,showGuidedOnboarding:U,currentProviderSecureDecision:z,hideAppSwitcher:C}},e=>({setA11yMessage:(...t)=>e((0,S.FY)(...t)),onLoad:({siteName:t})=>e((0,f.$D)()).then(n=>(t&&e((0,y.EQ)(t)),n&&(e((0,b.Wu)()),e((0,g.vP)()),e((0,w.oA)()),eE()),n)).catch(t=>401===t.code?e((0,f.Ov)(window.location.pathname)):Promise.reject(t)),loadNotifications:({user:t})=>t&&e((0,w.oA)()),loadSitesNavList:({accountSlug:t,siteName:n,sortBy:r})=>e((0,S.Gh)({accountSlug:t,siteName:n,sortBy:r})),onReadNotifications:t=>e((0,w.A7)(t)),onClickNotification:t=>e((0,w.y9)(t)),onLogout:t=>{e((0,f.TX)(t)),eD(),eE()},onDragEnter:t=>{e((0,h.f$)())},onDragLeave:t=>{(t.clientX<=0||t.clientY<=0||t.clientX>window.innerWidth||t.clientY>window.innerHeight)&&e((0,h.Xs)())},onDragOver:e=>{e.preventDefault()},onDrop:t=>{t.preventDefault(),e((0,h.Xs)())},trackUpgrade:(t,n)=>{e((0,x.L9)({event:t,...n}))},onCancelDeploy:(t,n)=>{e((0,m.li)((0,l.Map)({name:t}),(0,l.Map)({id:n})))},onChangeRoutePath:t=>{e((0,S.Qf)(t))},setPaymentProviderSecureDecisionState:t=>e((0,v.ot)(t))})))(e=>{var t;let{account:n,accounts:i,api:l,children:d,currentProviderSecureDecision:g,excludeAppNav:p=!1,excludeSecondaryNav:f=!1,hideAppSwitcher:v=!1,isAuthViewReady:m,loadNotifications:w,loadSitesNavList:b,location:y,onCancelDeploy:x,onChangeRoutePath:W,onDragEnter:B,onDragLeave:O,onDragOver:eu,onDrop:ep,onLoad:eP,organization:eZ,params:eI,redirect:eN,routePath:eF,showGuidedOnboarding:eC,site:eR,sitesNavList:e$,user:eT,userId:eU}=e,{isLoadingApp:ez}=(0,X.bn)(),[eA,eM]=(0,s.useState)(!0),[eW,eB]=(0,s.useState)(!1),[eO,eq]=(0,s.useState)(null),[eK,eH]=(0,s.useState)(g),[eV,eG]=(0,s.useState)(!1),[eJ,eX]=(0,s.useState)(!1),[eY,eQ]=(0,s.useState)(!1),e0=n?Number(n.getIn(["support_level"])):0,e1=null==n?void 0:n.get("slug"),e5=(0,eo.Z)(eU),e3=(0,em.I0)(),{themePreference:e2,setThemePreference:e6}=(0,Q.Fg)(),[e4,e7]=(0,s.useState)("true"===localStorage.getItem(ej)),e9=null!==(t=(0,u.v9)(S.oL)["toggle-navigation"])&&void 0!==t?t:{defaultModifiers:["Meta"],defaultCharacter:"\\"};(0,s.useEffect)(()=>{e3((0,S.SP)())},[e3]),(0,er.K)({targetKey:e9.defaultCharacter,modifiers:{metaKey:e9.defaultModifiers.includes("Meta"),altKey:e9.defaultModifiers.includes("Alt"),ctrlKey:e9.defaultModifiers.includes("Control"),shiftKey:e9.defaultModifiers.includes("Shift")}},()=>e7(e=>!e)),(0,s.useEffect)(()=>{localStorage.setItem(ej,`${e4}`)},[e4]);let[e8,te]=(0,s.useState)(!1),tt=(0,s.useRef)(null),tn=(0,s.useRef)(null),tr=e=>(function({isMobileNavOpen:e,setIsMobileNavOpen:t,event:n,secondaryNav:r,mobileNavButton:o}){var i;let{key:a,shiftKey:l,target:s}=n;if(!e||"Tab"!==a&&"Escape"!==a)return;let u=null!==(i=null==r?void 0:r.querySelectorAll("a, button"))&&void 0!==i?i:[],c=u[u.length-1];("Escape"===a||!l&&s===c||l&&s===o)&&(t(!1),s!==o&&(n.preventDefault(),null==o||o.focus()))})({isMobileNavOpen:e8,setIsMobileNavOpen:te,event:e,secondaryNav:tn.current,mobileNavButton:tt.current}),to=(0,et.P)("project_trumbeak_ui"),ti=(0,et.P)("project_libaniferous_ui"),ta=(0,et.P)("project_bulbasaur_ui"),tl=(0,et.P)("project_electabuzz_ui"),ts=(null==n?void 0:n.get("on_stripe_payment_processing"))!==!1,tu=()=>{eW||(eB(!0),eP({siteName:eI.name}).then(e=>{eB(!1),e||eM(!1)}).catch(e=>{eB(!1),eq(e),eM(!1)}).finally(()=>{requestIdleCallback(()=>{Array.isArray(window._asyncScriptsWaitingLoad)&&(window._asyncScriptsWaitingLoad.map(e=>e()),window._asyncScriptsWaitingLoad=[])},{timeout:2e3})}))},tc=()=>{document.addEventListener("dragenter",B,!1),document.addEventListener("dragleave",O,!1),document.addEventListener("dragover",eu,!1),document.addEventListener("drop",ep,!1)},td=()=>{document.removeEventListener("dragenter",B),document.removeEventListener("dragleave",O),document.removeEventListener("dragover",eu),document.removeEventListener("drop",ep)};(0,en.Z)(()=>{w(e)},6e5),(0,s.useEffect)(()=>{e5!==eU&&tu()},[eU,e5]),(0,s.useEffect)(()=>{ek!==eF&&(ek=eF,(r=(0,ev.ao)({routePath:eF})).whenDataFullyLoaded({timeout:15e3,whenDFLCallback:({viewDFLTimedOut:e})=>{r.markDataFullyLoaded({viewDFLTimedOut:e})}})),eA||ez||!r||r.markInitialRender()},[eA,ez,eF]),(0,s.useEffect)(()=>{n&&eT&&((0,ev.AC)({id:eT.get("id")||"",email:eT.get("email"),accountId:n.get("id"),plan:n.get("type_slug")}),(0,ev._z)("buildUTCTime",1704855461608))},[n,eT]);let tg=null==eR?void 0:eR.get("name");return(0,s.useEffect)(()=>{e1&&tg&&b({accountSlug:e1,siteName:tg,sortBy:tl?"published_at":"updated_at"})},[e1,tg,b,tl]),(0,s.useEffect)(()=>{eT&&!m&&eM(!0),m&&(eM(!1),eg.Z.setContext("sites",[],async(e,t)=>{let{data:n}=await l.sites({searchTerm:e,page:t});return n.map(e=>(0,es.rm)(e,ta))}))},[eT,m,l,ta]),(0,s.useEffect)(()=>{y.search.includes("request_hp_edge=true")?eX(!0):y.search.includes("request_background_functions=true")&&eQ(!0)},[y.search]),(0,s.useEffect)(()=>{if((null==eT?void 0:eT.get("id"))&&(null==n?void 0:n.get("slug"))){var e;eg.Z.launch({accountSlug:null!==(e=n.get("slug"))&&void 0!==e?e:"",dispatch:e3,setThemePreference:e6,themePreference:e2,user:eT})}},[null==eT?void 0:eT.get("id"),null==n?void 0:n.get("slug")]),(0,s.useEffect)(()=>(tc(),eE(),function(e){(eL=window._sift=window._sift||[]).push(["_setAccount",A.default.siftBeaconKey]),eL.push(["_setSessionId",e]),eL.push(["_setUserId",""]),eL.push(["_trackPageview"]);let t=document.createElement("script");t.src="https://cdn.sift.com/s.js",document.body.prepend(t)}((0,ec.St)("tracking_session_id")),(0,ec.St)("team_upgrade_flow")||(0,ec.D9)("team_upgrade_flow",JSON.stringify({})),()=>{td(),eD()}),[]),(0,s.useEffect)(()=>{if(eN)return c.mW.replace(eN)},[eN]),(0,s.useEffect)(()=>{let e=c.mW.listen(()=>{te(!1)}),t=(0,ee.X)("lg",e=>{e&&te(!1)});return()=>{t(),e()}},[]),(0,s.useEffect)(()=>c.mW.listenBefore(({pathname:e,search:t,hash:n})=>{let r=e||"";if(r.length>1&&r.endsWith("/")&&(r=r.slice(0,-1)),ea.mS.includes(r)||ea.Vi.some(e=>e(r))){eM(!0);let r=new URL(e,window.location.origin);r.search=t,r.hash=n,console.log("direct navigation to a token managing route. triggering full page nav",r.toString()),window.location.href===r.toString()?window.location.reload():(window.location.href=r.toString(),setTimeout(()=>{window.location.reload()},50))}}),[]),(0,s.useEffect)(()=>{W(eF),(0,ec.D9)("routePath",eF)},[W,eF]),(0,s.useEffect)(()=>{m&&eK&&e.setPaymentProviderSecureDecisionState(!0)},[m,eK]),(0,s.useEffect)(()=>{let e=(0,ec.le)("drop-token"),t=(0,ec.le)("dropUploadInterrupted"),n=(0,ec.le)("dropDeployId"),r=(0,ec.le)("dropSiteName");t&&n?(x(r,n),(0,h.Tu)()):m&&e&&r&&e3((0,h.ag)())},[x,m,e3]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eS.Z,{show:(ez||eA)&&!m}),!eA&&!eN&&(0,o.jsx)(V.Z,{isAuthViewReady:m,children:(()=>{let t=eF===ea.Z6.TEAM_OVERVIEW,r=eF===ea.Z6.DROP_BASE||eF.startsWith(ea.Z6.DROP_DETAIL),l=eF===ea.Z6.USER_LABS,s=(0,el.Z)(l?"dark:tw-text-white":"dark:tw-text-gray-light",l?"dark:tw-bg-gray-dark":"dark:tw-bg-transparent",l?"tw-bg-gray-lighter":"tw-bg-transparent",l?"tw-text-black":"tw-text-gray-darker",l?"tw-font-bold":"!tw-font-medium","dark:hover:tw-text-white","focus:tw-text-teal-darkest","hover:tw-bg-teal-lightest","hover:tw-text-teal-darkest","tw-flex","tw-flex-nowrap","tw-items-center","tw-justify-center","tw-w-full","lg:tw-w-auto","lg:tw-px-[12px]"),u=(0,el.Z)("tw-mt-[calc(calc(50vh)-40px)]","tw-ml-[-12px]","tw-relative"),c=eT?(0,o.jsxs)(o.Fragment,{children:[ti&&(0,o.jsx)("div",{className:"tw-flex tw-flex-1 tw-justify-center",children:(0,o.jsxs)(ew.Z,{level:"tertiary",to:ea.Z6.USER_LABS,onClick:()=>{_.iND.appPrimaryNavLabsClicked({currentPage:eF,accountId:(null==n?void 0:n.get("id"))||"",accountType:(null==n?void 0:n.get("type_name"))||""})},className:s,children:[(0,o.jsx)(ey.f,{className:(0,el.Z)("tw-shrink-0","tw-mr-[12px]",l&&"tw-hidden"),focusable:"false",name:"nav-labs"}),(0,o.jsx)(ey.f,{className:(0,el.Z)("tw-shrink-0","tw-mr-[12px]",!l&&"tw-hidden"),focusable:"false",name:"nav-labs-active"}),(0,o.jsx)("span",{className:"layout-toggleable-bold-text","data-text-content":"Labs",children:"Labs"})]})}),(0,o.jsx)("div",{className:"tw-flex tw-flex-1 tw-justify-center",children:(0,o.jsx)(ex.Z,{items:e.notifications,lastReadAt:e.lastNotificationReadAt,onRead:e.onReadNotifications,onClick:e.onClickNotification,align:e8?"left":"right"})}),(0,o.jsx)("div",{className:"tw-flex tw-flex-1 tw-justify-center",children:(0,o.jsx)(T.Z,{account:n,user:eT,align:"right",onClickUpgrade:()=>eG(!0)})}),eV&&(0,o.jsx)(U.Z,{supportLevel:e0,show:eV,onHide:()=>eG(!1),user:eT,account:n,accounts:i})]}):(0,o.jsx)(E.V,{});return m&&!0!==g&&ts&&setTimeout(()=>Promise.resolve(eH(!0))),(0,o.jsxs)(a.aH,{client:ef.Z,children:[(0,o.jsx)(M,{}),(0,o.jsx)(J.Z,{account:n,user:eT}),(0,o.jsx)(G.Z,{}),(0,o.jsx)(K.Z,{account:n,user:eT}),(0,o.jsx)(H.Z,{channel:"UserChannel",listener:ed.Qm}),to?(0,o.jsx)(Y.Z,{account:n,user:eT}):null,(0,o.jsxs)("div",{"data-no-secondary-nav":p||f?"true":void 0,className:(0,el.Z)("app tw-relative tw-h-full tw-w-full",{"page-drop__wrapper":r}),children:[(0,o.jsx)(I.Z,{}),!p&&(0,o.jsx)(P.Z,{user:eT,isDrop:r,isMobileNavOpen:!f&&e8,hideAppSwitcher:v,notifications:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.Z,{account:n,accounts:i}),(0,o.jsx)($.Z,{account:n,organization:eZ,user:eT}),(0,o.jsx)(R.Z,{account:n})]}),mobileMenu:!eT||f?null:(0,o.jsx)(D.S,{ref:tt,isSecondaryNavOpen:e8,onClick:()=>te(e=>!e),onKeyDown:tr}),appSwitcher:(0,o.jsx)(eh.Z,{organization:e.organization,organizations:e.organizations,account:n,accounts:e.accounts,site:eR,sites:e$,isDrop:r,user:eT}),actions:c,logo:(0,o.jsx)(eh.g,{isDrop:r,isPublic:null==eR?void 0:eR.get("public"),account:n}),commandPalette:eT&&(0,o.jsx)(Z.Z,{onClick:()=>{_.iND.appPrimaryNavCommandPaletteClicked({currentPage:eF,variant:"fauxinputty"}),eg.Z.open()}}),userDropdown:(0,o.jsx)(N.Z,{user:eT,onLogout:e.onLogout,className:"tw-h-[36px] tw-w-[36px]"})}),(0,o.jsxs)("div",{className:(0,el.Z)("tw-relative tw-flex tw-min-h-full"),children:[!p&&!f&&(0,o.jsx)("div",{className:(0,el.Z)('tw-min-w-0 [[data-page="not-found"]_&]:tw-hidden',{"lg:tw-w-[360px] lg:tw-min-w-[282px]":!e4,"lg:tw--mt-[var(--headerHeight)]":!e8,"tw-w-full":e8}),children:(0,o.jsxs)("div",{className:(0,el.Z)("tw-sticky tw-inset-x-0 tw-top-0 lg:tw-min-h-screen",{"tw-hidden tw-pt-[var(--headerHeight)] lg:tw-flex":!e8,"tw-min-h-full":e8}),children:[(0,o.jsx)("div",{className:(0,el.Z)("secondary-nav-container","tw-sticky","tw-top-0","tw-bottom-0",e8&&"tw-w-full","tw-border-gray-light","dark:tw-border-gray-dark","lg:tw-border-r",e8?"tw-h-full":"lg:tw-h-[calc(100vh-var(--headerHeight))] lg:tw-overflow-y-auto",e4&&!e8&&" tw-w-[58px]",!e4&&!e8&&"tw-w-[360px]"),children:(0,o.jsxs)("div",{className:(0,el.Z)("tw-columns","tw-flex","tw-h-full","tw-w-full","tw-flex-col","tw-break-words","tw-p-2 lg:tw-p-1",!e8&&"tw-overflow-x-hidden"),children:[(0,o.jsx)(D.a,{collapsedView:e4,ref:tn,className:"tw-pb-1",actions:c,navigation:e.navigation,site:eR,router:e.router,backTo:e.backTo,routePath:eF,account:n,onKeyDown:e8?tr:void 0}),(0,o.jsx)("div",{className:(0,el.Z)("tw-sticky tw-bottom-2 tw-left-0 tw-mt-auto tw-hidden tw-whitespace-nowrap tw-bg-bgApp tw-px-2 tw-transition tw-duration-200 lg:tw-block",e4&&"tw-opacity-0"),children:!e8&&!e4&&(0,o.jsx)(z.Y,{account:n})})]})}),!e8&&(0,o.jsx)("div",{className:u,children:(0,o.jsx)(e_.Z,{onToggle:e7,isCollapsed:e4})})]})}),(0,o.jsx)("div",{className:(0,el.Z)("tw-w-full",{"tw-hidden":e8}),children:(0,o.jsxs)("div",{className:"tw-relative tw-mx-auto tw-grid tw-min-h-full tw-grid-cols-1",children:[(0,o.jsxs)("main",{id:"main",className:(0,el.Z)("app-main",{"before:tw-bg-gray-lighter dark:before:tw-bg-gray-darkest before:tw-h-[660px] md:before:tw-h-[560px] lg:before:tw-h-[460px]":eC&&t}),tabIndex:-1,children:[(0,o.jsx)(eb.Z,{}),(0,o.jsx)(F.Z,{account:n}),eO?(0,o.jsx)(ei.Z,{error:eO}):d]}),!p&&(0,o.jsx)(k.Z,{})]})})]})]}),(0,o.jsx)(q,{router:e.router,account:n}),n&&i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.Z,{show:eJ,currentAccount:n,hideTaskModal:()=>{var t;eX(!1);let n=e.router;n.replace(null===(t=n.location)||void 0===t?void 0:t.pathname)}}),(0,o.jsx)(j.Z,{show:eY,account:n,accounts:i,onHide:()=>eQ(!1)})]})]})})()})]})}))},17259:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(74512),o=n(88601),i=n(32735),a=n(15062),l=n(13743),s=n(55678),u=n(11554),c=n(38396),d=n(68323),g=n(2969),p=n(33947),f=n(43239),v=n(41757);function m(e){return{log:"new"===e.get("state")?"Queueing build":"There is no log for this deploy",ts:new Date().toString()}}function h(e){return e&&"pending_review"===e.get("state")}function w(e){return e&&"error"===e.get("state")}function b(e){let t=(0,d.f3)(e),n=e.log||e.msg||"",r=/(Failed during stage 'building site': Build script returned non-zero|Command failed with) exit code:? ([\d]+)/i;if(n.match(r)){let[,,e]=n.match(r);return`${t} (https://ntl.fyi/exit-code-${e})`}return t}let y=(0,a.$j)(function(e,{deploy:t,site:n,overview:r}){return{deploy:r?(0,s.dk)(e,n):t,fetchLog:(...t)=>(0,l.ac)(e).deployLog(...t)}})(function(e){let{deploy:t,children:n,overview:a,onLoadDeployPluginRuns:l}=e,[y,x]=(0,i.useState)((0,c.fl)(null==t?void 0:t.get("state"))),[S,_]=(0,i.useState)(null),j=(0,i.useRef)(!1),L=(0,i.useRef)(null),k=(0,i.useRef)(null),P=(0,i.useRef)(null),Z=(0,i.useRef)(null),E=null==t?void 0:t.get("id"),D=!!t&&h(t),I=!!t&&w(t),N=(0,f.I0)();(0,i.useEffect)(()=>{(t&&"ready"===t.get("state")||w(t))&&x(!0)},[t]),(0,i.useEffect)(()=>{if(E&&!a)return R(t),()=>{j.current=!0,C()}},[E,D,a]);let F=e=>{if(!e)return;if(e&&e.get("skipped"))return $({log:"Deploy skipped",ts:e.get("created_at")});if(e&&"rejected"===e.get("state"))return $({log:"Deploy request was rejected",ts:e.get("updated_at")});if(h(e))return $({log:"Deploy request is pending review",ts:e.get("created_at")});e&&e.get("skipped_log")&&$({log:"[WARNING] We are experiencing internal issues storing deploy logs. Some log lines may be missing.",ts:e.get("created_at")},!1);let t={type:"socketeer",siteId:e.get("site_id"),deployId:e.get("id"),resource:p.Z.BUILD};if(L.current=(0,g.u)(t),!L.current)return $(m(e));L.current.listen(T,U),k.current=setInterval(z,1e3)},C=()=>{k.current&&clearInterval(k.current),L.current&&L.current.close()},R=e=>{C(),F(e)},$=(e,t=!0)=>{!j.current&&(P.current=(P.current||(0,o.List)()).push(e),t&&z())},T=(e=m(t))=>{let n=e.log,r=e.ts||e.time;if(e.section){let t=(0,v.St)(n);$({...e,...t&&{status:t}},!1)}else $(e,!1);if(/onSuccess complete/.test(n)||/In "onSuccess" event in "@netlify\/plugin-lighthouse"/.test(n))null==l||l(null==t?void 0:t.get("id"));else if(/^buildbot version: /.test(n))Z.current=r;else if(/^Execution timed out after/.test(n)){let e=Z.current;e&&r&&N((0,s.E)(t,e,r))}else if(/Starting post processing/.test(n)){let e=Z.current;e&&r&&N((0,s.E)(t,e,r))}},U=e=>{$({log:"[ERROR] Deploy logs are currently unavailable. We are working on resolving the issue.",ts:new Date}),C()},z=()=>{j.current||_(P.current)};return n?(0,i.cloneElement)(n,{...e,log:S}):(0,r.jsx)(u.Z,{...e,log:S,streaming:!y,formatLogEntry:I?b:d.f3,deployIsDone:y})})},32039:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(74512),o=n(15062),i=n(69165),a=n(74641);let l=(0,o.$j)(function(e,t){return{dragging:e.dragging&&e.dragging.get("active"),uploading:!!e.uploadState}})(({dragging:e,uploading:t,intro:n,image:o,site:l,accountSlug:s,dispatch:u,trackEvent:c,scrollIntoView:d=!0,createdVia:g=""})=>(0,r.jsx)(a.Z,{scrollIntoView:d,onUpload:e=>(c&&c(),(l?()=>Promise.resolve(l):()=>u((0,i.UJ)(s,g)))().then(t=>u((0,i.mV)(t,e)))),dragging:e,uploading:t,image:o,intro:n}))},49765:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(74512),o=n(32735),i=n(68147),a=n(24327);let l=e=>{let{site:t}=e,{setIsLoadingApp:n}=(0,a.bn)();return(0,o.useEffect)(()=>{n(!1)},[n]),(0,r.jsx)(i.Z,{...e,usesEdgeFunctions:t.get("use_edge_functions")})}},63567:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(74512),o=n(32735),i=n(15062),a=n(5193),l=n(6950);let s=(0,i.$j)((e,{site:t})=>({services:(0,a.M2)(e,t)}),e=>({onLoad:({site:t})=>e((0,a.k4)(t))}))(e=>((0,o.useEffect)(()=>{e.onLoad(e)},[]),(0,r.jsx)(l.Z,{...e})))},49066:(e,t,n)=>{n.d(t,{Z:()=>k});var r=n(74512),o=n(88601),i=n(33259),a=n.n(i),l=n(32735),s=n(29465),u=n(4513),c=n(95045),d=n(12928),g=n(33234),p=n(593),f=n(21297),v=n(68323),m=n(2969),h=n(33947),w=n(43239),b=n(11211);function y(e){let t=null==e?void 0:e.get("level");return"WARN"!==t&&"ERROR"!==t?"":(0,f.Z)("WARN"===t?"tw-border-gold-darker tw-bg-gold-darkest":"tw-border-red-darker tw-bg-red-darkest","tw-border-y")}let x=(0,f.Z)("md:tw-mt-0","tw-ml-0","tw-mt-0","tw-mb-2","tw-w-full","xl:tw-mb-0","xl:tw-basis-1","xl:tw-grow","xl:tw-mr-0"),S=()=>d.Z.getInitialDateRange(),_=e=>{let[t,n]=(0,l.useState)((0,o.List)()),r=(0,l.useRef)((0,o.List)()),i=(0,l.useRef)(null),{dateTimeRange:s,streaming:u}=e,c=(0,l.useCallback)(a()(()=>{n(r.current)},200,{leading:!0}),[]);return(0,l.useEffect)(()=>{var t;let a=()=>{i.current&&(i.current.close(),i.current=null)};if((null===(t=r.current)||void 0===t?void 0:t.size)&&(r.current=(0,o.List)(),n(r.current)),!u){a();return}return(()=>{var t,n;if(i.current)return;let{site:a,func:l,user:u,log_type:d}=e,p=a.get("id"),f=l.get("n"),v=(0,g.XF)(l).replace(/\./g,"-"),w=`/functions/${p}/${v}/${f}/log`;i.current=(0,m.u)({type:d||"socketeer",resource:h.Z.FUNCTION,functionId:l.get("oid")||l.get("id"),siteId:p,apiToken:u.get("access_token"),awsAccountId:l.get("a"),path:w,fromDatetime:null===(t=s.from)||void 0===t?void 0:t.toISOString(),toDatetime:null===(n=s.to)||void 0===n?void 0:n.toISOString()}),i.current.listen(e=>{e&&(r.current=(0,o.fromJS)([...r.current,e]),c())},e=>{r.current=(0,o.fromJS)([...r.current,{ts:new Date,log:"[ERROR] Function logs are currently unavailable. We are working on resolving the issue."}]),c()})})(),()=>{a()}},[u,s.to,s.from]),{logs:t,streaming:e.streaming,source:"stream"}},j=({site:e,scope:t,filtersValue:n,func:r,dateTimeRange:i,streaming:a,...c})=>{var d,g;let p=null==e?void 0:e.get("id"),f=null==r?void 0:r.get("n"),v=(0,w.I0)(),m=null===(d=i.from)||void 0===d?void 0:d.getTime(),h=null===(g=i.to)||void 0===g?void 0:g.getTime(),b=(0,w.v9)(n=>{let r=(0,u.x0)(n,e,t);return null==r?void 0:r.get("branch")}),y=(0,w.v9)(e=>(0,s.ZF)(e,p,f,{branch:b,q:n.term,from:m,to:h})||null),x=(0,w.v9)(e=>(0,s.rm)(e,p,f,{branch:b,q:n.term,from:m,to:h})||(0,o.List)()),S=(0,w.v9)(e=>(0,s.lf)(e,p,f,{branch:b,q:n.term,from:m,to:h})),_=(0,l.useRef)(new Set),j=!!(null==x?void 0:x.size)&&!y,L=async()=>{let e=`${y||"initial"}-${n.term}-${m}-${h}-${b}`;_.current.has(e)||(_.current.add(e),await v((0,s.X4)(p,f,{from:new Date(m).getTime(),to:new Date(h).getTime(),q:n.term,next_cursor:y,branch:b})))};return(0,l.useEffect)(()=>{a||L()},[a,n.term,m,h]),{logs:x,lastPage:j,fetchMoreLogs:L,streaming:!1,fetching:S,source:"page"}},L=e=>{let t=_(e),n=j(e);return e.streaming?t:n},k=e=>{let[t,n]=(0,l.useState)({term:""}),[o,i]=(0,l.useState)(S()),[a,s]=(0,l.useState)(!0),u=e.account.get("id")||"",{fetching:f,streaming:m,logs:h,lastPage:w,fetchMoreLogs:_,source:j}=L({...e,streaming:a,dateTimeRange:o,filtersValue:t}),k=(0,l.useMemo)(()=>v.E1,[]),P=(0,l.useMemo)(()=>v.Zh,[]);(0,l.useEffect)(()=>{n(e=>({...e,dateTimeRange:o}))},[o]);let Z="stream"===j||"page"===j&&f?"Waiting for logs":"No results found for query",E="lambda";return(0,r.jsx)(p.Z,{datepicker:(0,r.jsx)(d.Z,{account:e.account,isUnsupportedBackgroundFunction:(0,g.Oj)(e.func),onChange:({range:e,id:t})=>{s("Real-time"===t),i(e)},functionsType:E}),log:h.isEmpty()?null:h,fetching:f,streaming:m,fixedHeight:!0,noWrap:!0,emptyLogMessage:Z,title:"Function log",formatLogEntry:k,getLogLineClasses:y,scrollPause:!0,filters:t,lastPage:w,filterFn:"stream"===j?(e,t)=>{let n=(null==e?void 0:e.get("type"))==="report"&&(null==e?void 0:e.get("level"))==="INFO"?e.set("level",""):e;return["log","requestId","level"].map(e=>null==n?void 0:n.get(e)).filter(Boolean).join(" ").toLowerCase().includes(t.term.toLowerCase())}:null,loadMoreLogs:_,search:(0,r.jsx)("div",{className:x,children:(0,r.jsx)(b.Z,{placeholder:"Filter by request ID, message, log level",value:t.term,onSearch:e=>{n(t=>({...t,term:e}))},onFocus:()=>c.iND.appFunctionLogsTextFilterFocused({accountId:u,functionsType:E})})}),source:j,formatForClipboard:P,onCopyToClipboard:()=>c.iND.appFunctionLogsCopyClicked({accountId:u,functionsType:E}),onPlayPause:()=>c.iND.appFunctionLogsPauseClicked({accountId:u,functionsType:E}),onScrollToBottom:()=>c.iND.appFunctionLogsScrollBottomClicked({accountId:u,functionsType:E}),onScrollToTop:()=>c.iND.appFunctionLogsScrollTopClicked({accountId:u,functionsType:E})})}},36706:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(74512),o=n(32735),i=n(15062),a=n(42881),l=n(49207),s=n(3643),u=n(56268),c=n(47459),d=n(69165),g=n(88111),p=n(61345),f=n(22186);let v={[f.Lz.github_enterprise]:!0,[f.Lz.gitlab_self_hosted]:!0,[f.Lz.bitbucket_self_hosted]:!0},m=(0,i.$j)(function(e,t){let{organization:n,name:r}=t.params,{repoFromURL:o}=t,i=t.params.repo||t.repo,a=n||"",g=a?`${a}/${i}`:i,p=(0,d.lH)(e,r),f=!p&&(0,l.L3)(e),v=f&&(0,l.uW)(e),m=decodeURIComponent(g),h=(0,u.f6)(e),w=(0,u.iQ)(e),b=(0,u.WF)(e);return{repo:(null==o?void 0:o.mergeDeep((0,c.Wo)(e,m)))||(0,c.Wo)(e,m),provider:(0,s.oI)(e),gitUser:(0,s.z8)(e),site:p,accounts:f,account:v,availablePlugins:h,availablePluginsError:w,availablePluginsFetching:b,user:e.user}},function(e,t){let{site:n,provider:r,onError:o,onSubmit:i}=t;return{onLoadPlugins:()=>e((0,u.bl)()),onPrepareRepo:(t,n)=>{var r;return null===(r=e((0,c.oV)(t)))||void 0===r?void 0:r.then(()=>{e((0,c.vb)(t,n))})},loadMoreBranches:(t,n)=>e((0,c.Qg)(t,n)),onApplyHeuristics:(t,n,o)=>{t&&e((0,c.I0)(t,n,{...o,provider:r}))},onSubmit:(t,r)=>i?i(t,r):e((0,d.Er)(n,r,t.toJS(),"onboarding")).then(({site:e,deploy:t})=>a.mW.push(`/sites/${e.name}/deploys/${null==t?void 0:t.id}`)).catch(e=>o(e))}})(({repo:e,onPrepareRepo:t,onMissingData:n,onError:i,loadMoreBranches:a,site:l,account:s,accounts:u,onSubmit:c,onApplyHeuristics:d,provider:m,outset:h,nameKey:w,template:b,trackChangeClick:y,form:x=g.Z,availablePlugins:S,availablePluginsError:_,availablePluginsFetching:j,onLoadPlugins:L,skipPrepare:k=!1,gitUser:P,user:Z,route:E})=>{let D=(0,p.V)(),I=null==e?void 0:e.getIn(["branchPagination","next"]),N=null==e?void 0:e.get("error"),F=null==e?void 0:e.get("id");return(0,o.useEffect)(()=>{j||_||(null==S?void 0:S.size)||L()},[S,_,j]),(0,o.useEffect)(()=>{if(!e){n("repo");return}k||t(e,D)},[F]),(0,o.useEffect)(()=>{N&&(i(N),n("repo"))},[N]),(0,o.useEffect)(()=>{m!==f.Lz.bitbucket&&I&&a(e,I)},[m,I]),e?(0,r.jsx)(x,{site:l,account:s,accounts:u,repo:e,onSubmit:c,outset:h,onApplyHeuristics:d,accountSpecificGitProvider:v[m],provider:m,nameKey:w,template:b,trackChangeClick:y,availablePlugins:S,availablePluginsError:_,gitUser:P,user:Z,route:E}):null})},93417:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(74512),o=n(15062),i=n(49207),a=n(3643),l=n(95045),s=n(76743),u=n(22186);let c=(0,o.$j)(function(e){return{account:e.account||(0,i.uW)(e),user:e.user}},function(e){return{onAuthenticate:t=>e((0,a.YR)(t))}})(e=>{let{entryPoint:t,user:n,account:o}=e,i={userId:(null==n?void 0:n.get("id"))||"",entryPoint:t||"from direct visit",accountId:(null==o?void 0:o.get("id"))||""};return(0,r.jsx)(s.Z,{...e,trackSelectProvider:e=>{switch(e){case u.Lz.github:l.iND.appSignupSetupProviderGithubSelected(i);break;case u.Lz.gitlab:l.iND.appSignupSetupProviderGitlabSelected(i);break;case u.Lz.github_enterprise:l.iND.appSignupSetupProviderGithubEnterpriseSelected(i);break;case"gitlab_enterprise":l.iND.appSignupSetupProviderGitlabEnterpriseSelected(i);break;case u.Lz.bitbucket:l.iND.appSignupSetupProviderBitbucketSelected(i);break;case u.Lz.azure_devops:l.iND.appSignupSetupProviderAzureDevopsSelected(i)}}})})},79594:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(74512),o=n(32735),i=n(15062),a=n(42881),l=n(49207),s=n(3643),u=n(85631),c=n(47459),d=n(32169),g=n(22186);let p=(0,i.$j)(function(e,t){var n,r,o;let{organization:i}=t.params,a=e.account||(0,l.uW)(e),d=(0,s.z8)(e),p=(0,u.wc)(e,i),f=(0,u.YX)(e),v=(0,s.oI)(e),m=g._w.get(v),h=null==m?void 0:m.get("hideGitUserFromRepoList"),w=i||h&&(null==f?void 0:null===(n=f.first())||void 0===n?void 0:n.get("api_id")),b=p||d&&d.get("login")===i&&d,y=b&&b.get("installation_id");return{account:a,page:(null==t?void 0:null===(o=t.location)||void 0===o?void 0:null===(r=o.query)||void 0===r?void 0:r.page)||1,provider:(0,s.oI)(e),installationId:y,gitUser:d,organization:w,organizations:f,hideGitUser:h,searchTerm:(0,s.Lb)(e),repos:(0,c.yW)(e,w),pagination:(0,c.B$)(e,w)}},function(e){return{loadRepos:t=>e((0,c.vD)(t)),loadGitUser:()=>e((0,s.Kd)()),loadGitOrganizations:()=>e((0,u.hi)()),setSearchTerm:t=>e((0,s.Cl)(t))}})(function(e){let{provider:t,organization:n,page:i,per_page:l,installationId:s,onError:u,onMissingData:c,loadRepos:g,loadGitUser:p,loadGitOrganizations:f,path:v,setSearchTerm:m,onboarding:h=!1,hideGitUser:w}=e;(0,o.useEffect)(()=>{t?b():c("provider")},[]),(0,o.useEffect)(()=>{t&&(!w||n)&&g({organization:n,page:i,per_page:l,installationId:s}).catch(e=>{u(e,{restart:401===e.code})})},[t,i,n,g]);let b=()=>{Promise.resolve(p()).then(()=>{w||g({organization:n,page:i,per_page:l,installationId:s}),f()})};return t?(0,r.jsx)(d.Z,{...e,onSearch:()=>g({organization:n,page:i,per_page:l,installationId:s,page:1}).catch(e=>{u(e,{restart:401===e.code})}),onTerm:e=>m(e),onAppInstall:({login:e})=>{f(),e&&e!==n?a.mW.push(`${v}/${e}/repos`):g({organization:n,page:i,per_page:l,installationId:s})},onboarding:h}):null})},30387:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(74512),o=n(88601),i=n(32735),a=n(15062),l=n(42881),s=n(49207),u=n(3643),c=n(56268),d=n(47459),g=n(69165),p=n(88111),f=n(61345),v=n(22186);let m={[v.Lz.github_enterprise]:!0,[v.Lz.gitlab_self_hosted]:!0},h=(0,a.$j)(function(e,t){let{repo:n,name:r}=t.params,i=(0,g.lH)(e,r),a=i&&(0,s.L3)(e).find(e=>(null==e?void 0:e.get("slug"))===i.get("account_slug")),l=a?(0,o.List)([a]):(0,s.L3)(e),p=l&&(0,s.uW)(e),f=a||p,v=decodeURIComponent(n),m=(0,c.f6)(e),h=(0,c.iQ)(e),w=(0,c.WF)(e),b=(0,u.z8)(e);return{repo:(0,d.Wo)(e,v),provider:(0,u.oI)(e),site:i,accounts:l,account:f,availablePlugins:m,availablePluginsError:h,availablePluginsFetching:w,gitUser:b}},function(e,t){let{site:n,provider:r,onError:o}=t;return{onLoadPlugins:()=>e((0,c.bl)()),onPrepareRepo:(t,n)=>{var r;return null===(r=e((0,d.oV)(t)))||void 0===r?void 0:r.then(()=>{e((0,d.vb)(t,n))})},loadMoreBranches:(t,n)=>e((0,d.Qg)(t,n)),onApplyHeuristics:(t,n,o)=>{t&&e((0,d.I0)(t,n,{...o,provider:r}))},onSubmit:(t,r)=>e((0,g.Er)(n,r,t.toJS(),"")).then(({site:e})=>l.mW.push(`/sites/${e.name}`)).catch(e=>o(e,{restart:401===e.code}))}})(({entryPoint:e,repo:t,onPrepareRepo:n,onMissingData:o,onError:a,loadMoreBranches:l,site:s,account:u,accounts:c,onSubmit:d,onApplyHeuristics:g,provider:h,outset:w,availablePlugins:b,availablePluginsError:y,availablePluginsFetching:x,onLoadPlugins:S,user:_,gitUser:j,route:L,isOnStartPage:k,setFormData:P})=>{let Z=(0,f.V)(),E=null==t?void 0:t.getIn(["branchPagination","next"]),D=null==t?void 0:t.get("error");return(0,i.useEffect)(()=>{x||y||(null==b?void 0:b.size)||S()},[b,y,x]),(0,i.useEffect)(()=>{t?n(t,Z):o("repo")},[]),(0,i.useEffect)(()=>{D&&(a(D),o("repo"))},[D]),(0,i.useEffect)(()=>{h!==v.Lz.bitbucket&&E&&l(t,E)},[h,E]),t?(0,r.jsx)(p.Z,{entryPoint:e,user:_,gitUser:j,site:s,account:u,accounts:c,repo:t,onSubmit:d,outset:w,onApplyHeuristics:g,accountSpecificGitProvider:m[h],availablePlugins:b,availablePluginsError:y,route:L,isOnStartPage:k,setFormData:P}):null})},54276:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(74512),o=n(32735),i=n(15062),a=n(72546);let l=(0,i.$j)(function(e,{site:t}){return{identity:(0,a.jZ)(e,t)}},function(e,{site:t}){return{onLoad:()=>e((0,a.r6)(t)),onCreate:()=>e((0,a.XD)(t)),onUpdate:n=>e((0,a.EI)(t,n)),onDelete:()=>e((0,a.dU)(t))}})(e=>((0,o.useEffect)(()=>{e.onLoad()},[]),(0,r.jsx)(r.Fragment,{children:o.Children.map(e.children,t=>(0,o.cloneElement)(t,{...e}))})))},35175:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(74512),o=n(88601),i=n(15062),a=n(35812);let l=(0,i.$j)(function(e){let t=e.user;return{user:t,progress:t&&t.get("onboarding_progress")||(0,o.Map)()}},function(e){return{onProgress:(t,n)=>e((0,a.fq)(t,n))}})(({component:e,children:t,...n})=>{let o=e||t;return o?(0,r.jsx)(o,{...n}):null})},54603:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(74512),o=n(32735),i=n(15062),a=n(59987),l=n(13743),s=n(7866),u=n(66083);let c=(0,i.$j)(function(e,{account:t}){let n=(0,l.ac)(e);return{receipts:(0,a.L6)(e,t),api:{receiptPdf:e=>n.accountReceiptPdf(t.get("slug"),e)}}},function(e,{account:t}){return{onLoad:()=>(0,u.gK)(t)&&e((0,a.V8)(t))}})(e=>{let{onLoad:t,account:n}=e,i=n.get("id");return(0,o.useEffect)(()=>{t(e)},[i]),(0,r.jsx)(s.Z,{...e})})},81544:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(74512),o=n(32735),i=n(15062),a=n(5193),l=n(48807),s=n(24327);let u=(0,i.$j)(function(e,{site:t}){return{services:(0,a.M2)(e,t)}},function(e,{site:t}){return{onLoad:()=>e((0,a.k4)(t)),onCreate:(n,r)=>e((0,a.G6)(t,n,r)),onUpdate:(n,r)=>e((0,a.Pg)(t,n,r)),onDelete:n=>e((0,a.wo)(t,n)),onGenerateToken:(t,n)=>e((0,a.RA)(t,n))}})(({onLoad:e,...t})=>{let{setIsLoadingApp:n}=(0,s.bn)();return(0,o.useEffect)(()=>{e(),n(!1)},[]),(0,r.jsx)(l.Z,{...t})})},34162:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(74512),o=n(32735),i=n(15062),a=n(48579),l=n(6128),s=n(24327),u=n(93061);let c=(0,i.$j)((e,{site:t})=>({members:(0,a.ad)(e,t)}),e=>({onLoad:({site:t})=>e((0,a.el)(t))}))(({site:e,members:t,onLoad:n,user:i})=>{let{setIsLoadingApp:a}=(0,s.bn)();(0,o.useEffect)(()=>{a(!1)},[a]),(0,o.useEffect)(()=>{n({site:e})},[]);let c=e.get("account_slug"),d=(0,u.Z)(c);return(0,o.useEffect)(()=>{c!==d&&n({site:e})},[c,d]),(0,r.jsx)(l.Z,{site:e,members:t,user:i})})},51986:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(74512),o=n(32735),i=n(42881),a=n(49207),l=n(69165),s=n(31915),u=n(44628),c=n(27564),d=n(61345);function g(e){var t,n;let{project_electabuzz_ui:r}=e,o=r?null===(t=s.aP.find(e=>null==e?void 0:e.default))||void 0===t?void 0:t.value:"",i={visibility:e.visibility,creator:e.creator,sortBy:null!==(n=e.sortBy)&&void 0!==n?n:o,orderBy:e.orderBy},a={page:e.page,perPage:e.perPage||12,searchTerm:e.searchTerm,searchGlobally:e.searchGlobally,accountSlug:e.accountSlug,labelIds:e.labelIds};return r?{...a,...i}:a}let p=(0,c.v)(function(e,t){let n=g(t),r=(0,l.u)(e,n);return{sites:r,pagination:(0,l.OK)(e,n),loaded:!!r,user:e.user,account:(0,a.bk)(e,n.accountSlug),accounts:(0,a.L3)(e)}},e=>(0,l.KZ)(g(e)),"page","perPage","searchTerm","searchGlobally","visibility","creator","sortBy","accountSlug","orderBy","project_electabuzz_ui","labelIds")(u.Z),f=e=>{let t=(0,d.P)("project_electabuzz_ui"),{getApplicableListParams:n}=(0,s.nv)(e.accountSlug),[a,l]=(0,o.useState)(!0),u=t?null==n?void 0:n():null,c=new URLSearchParams(window.location.search).toString();return((0,o.useEffect)(()=>{if((c||!u)&&l(!1),!c&&u){let e=window.location.pathname,t=`${e}?${u}`;i.mW.replace(t)}u===c&&l(!1)},[a,c,u]),a)?null:(0,r.jsx)(p,{...e,project_electabuzz_ui:t})}},55380:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(74512),o=n(32735),i=n(15062),a=n(49207),l=n(41547),s=n(71335);let u=(0,i.$j)(function(e,{account:t}){return{paymentMethod:(0,s.DY)(e,t),paymentProvider:(0,l.nY)(t),plans:(0,a.qL)(e)}},function(e,{account:t}){return{onLoad:({account:t})=>{e((0,a.vP)()),e((0,a.Ko)()),e((0,s.nS)(t))},onUpdate:(t,n)=>e((0,a.sG)(t,n)),onPaymentProviderTokenUsed:n=>e((0,l.Uc)(t,n)),onSavePaymentMethod:n=>e((0,s.BX)(n,t))}})(e=>{(0,o.useEffect)(()=>{var t;null===(t=e.onLoad)||void 0===t||t.call(e,e)},[]);let t=e.component||e.children;return(0,r.jsx)(t,{...e})})},9190:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(45546),o=n(88601),i=n(81865),a=n.n(i),l=n(32735),s=n(15062),u=n(13743),c=n(55678),d=n(5625);let g=e=>({publish:c.LT,delete:c.vQ,lock:c.Bn,unlock:c.FN,retry:c.kR,cancel:c.li})[e],p=(0,s.$j)(function(e){return{user:e.user,config:e.config,api:(0,u.ac)(e)}})(function(e){let[t,i]=(0,l.useState)(null),s=e=>{i((0,o.Map)(e))},c=async t=>{let{user:r,config:o}=e,i=t.get("id"),l=(0,u.ac)({user:r,config:o});if(!l)return;s({state:"downloading"});let c=new(await n.e(1578).then(n.t.bind(n,62467,23))).default,d=a()(8);l.listDeployFiles(i).then(e=>e.data.map(e=>d(()=>l.downloadDeployFile(i,e.path)).then(t=>(function(e,t,n){let r=t.path.replace(/^\//,"").split("/"),o=null;for(;r.length;)o=r.shift(),r.length?e=e.folder(o):e.file(o,n)})(c,e,t)))).then(e=>Promise.all(e)).then(()=>c.generateAsync({type:"blob"})).then(e=>{s({state:"ready",zip:e})}).catch(e=>{s({state:"error",error:e})})},p=(e,t)=>{let n=`deploy-${e.get("id")}.zip`,o=t.get("zip");return(0,r.saveAs)(o,n)},{component:f,...v}=e;return(0,l.createElement)(f||d.Z,{...v,download:t,onDeployAction:(t,n,r)=>{let o=g(t);return e.dispatch(o(e.site,n,r))},onDownload:(e,t)=>{t&&t.get("zip")?p(e,t):c(e)}})})},34734:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(32735),o=n(55678),i=n(69165),a=n(27564),l=n(28852);function s({page:e,perPage:t,filter:n,from:r,to:o,status:i}){return{page:e,perPage:t,filter:n,from:r,to:o,state:i}}let u=(0,a.v)(function(e,t){let n=t.site,r=s(t);return{deploys:(0,o.Oh)(e,n,r),pagination:(0,o.ly)(e,n,r),pendingDeploys:(0,o.mh)(e,n)}},e=>(0,o.Kr)(e.site,s(e)),"page","perPage","filter","from","to","status")(function(e){let{poll:t,dispatch:n,site:a,page:u,perPage:c,filter:d,from:g,to:p,status:f}=e,{component:v,children:m,...h}=e,w=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(w.current&&clearInterval(w.current),t)return w.current=setInterval(()=>{n((0,o.Kr)(a,s({page:u,perPage:c,filter:d,from:g,to:p,status:f}))),n((0,i.EQ)(a.get("name")))},(0,l.S)()),()=>{clearInterval(w.current)}},[u,c,d,t,g,p]),v?(0,r.createElement)(v,h,m):(0,r.cloneElement)(m,h)})},41757:(e,t,n)=>{n.d(t,{Lq:()=>a,St:()=>r});let r=e=>{for(let t of[/Failed during stage/i,/Failing build/i,/Build exited unexpectedly/i,/Build exceeded (maximum allowed runtime|memory limits)/i,/The function "[^"]+" is larger than the \d+\w{2} limit/i,/Unzipped size must be smaller than/i,/Uploaded file must be a non-empty zip/i,/Your environment variables contain reserved keys/i,/Your environment variables exceed the \d+KB limit imposed by AWS Lambda./i,/Deploy did not succeed:/i])if(t.test(e))return"fail"},o=["error","failed","fatal","exception","uncaught","unhandled","abort","crash","killed","interrupt","panic","throw","⚠️"],i=e=>{for(let t of o)if(e.toLowerCase().includes(t))return!0;return!1},a=e=>{let t=[],n=e.count(),r=-1;return e.forEach((o,a)=>{if(o&&(a||0===a)&&i(o.log)){let o=Math.max(r+1,a-10),i=Math.min(n,a+11);for(let n=o;n<i;n++){let r=e.get(n);t.push({log:r.log.slice(0,128),line:n+1})}r=i-1}}),t}},32910:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(32735),o=n(13743),i=n(52694),a=n(63303);function l({page:e=1,perPage:t=20,formId:n,filter:r}){return{page:e,perPage:t,formId:n,filter:r}}let s=(0,n(27564).v)(function(e,t){let n=t.site,r=l(t);return{...r,form:(0,i.jy)(e,r.formId),forms:(0,i.Jo)(e,n),submissions:(0,i.Rg)(e,n,r),submissionsError:(0,i.kk)(e,n,r),pagination:(0,i.$d)(e,n,r),api:{formSubmissions:(...t)=>(0,o.ac)(e).formSubmissions(...t)}}},e=>(0,i.A)(e.site,l(e)),"page","perPage","formId","filter")(({children:e,component:t=a.Z,...n})=>(n.onDelete=(e,t,r)=>n.dispatch((0,i.zH)(e,t,r)),n.onMarkAsSpam=(e,t)=>n.dispatch((0,i.XL)(e,t,{...l(n),page:1})),n.onMarkAsHam=(e,t)=>n.dispatch((0,i.cJ)(e,t,{...l(n),page:1})),e?(0,r.cloneElement)(e,n):(0,r.createElement)(t,n,e)))},22617:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(32735),o=n(72546);function i(e){return{...e.location.query}}let a=(0,n(27564).v)(function(e,{site:t,...n}){let r=i(n),a=(0,o.dk)(e,t,r);return{...r,provisioned:!!t.get("identity_instance_id"),users:a,pagination:(0,o.PO)(e,t,r)}},({site:e,...t})=>(0,o.FJ)(e,i(t)),"provisioned","page","per_page","sort","filter")(function({component:e,children:t,...n}){return e?(0,r.createElement)(e,n,t):(0,r.cloneElement)(t,n)})},54463:(e,t,n)=>{n.d(t,{Jg:()=>u.Jg,ND:()=>u.ND,ZP:()=>d});var r=n(32735),o=n(15062),i=n(52694),a=n(3643),l=n(70151),s=n(5193),u=n(42063),c=n(61580);let d=(0,o.$j)(function(e,{site:t}){return{hooks:(0,l.e_)(e,t),hookTypes:(0,l.o6)(e,t),forms:(0,i.Jo)(e,t),provider:(0,a.oI)(e)}},function(e,{site:t,filter:n}){return{onLoad:()=>{e((0,l.Eq)(t)),e((0,l.v9)(t)),n===u.Jg&&e((0,i.jn)(t))},onDelete:n=>e((0,l.$_)(t,n)),onCreate:n=>e((0,l.Bi)(t,n)),onUpdate:(n,r)=>e((0,l.ny)(t,n,r)),onTokenRequest:(t,n)=>e((0,s.RA)(t,n))}})(({onLoad:e,component:t,...n})=>{var o,i;return(0,r.useEffect)(()=>{e()},[null===(o=n.account)||void 0===o?void 0:o.get("id"),null===(i=n.account)||void 0===i?void 0:i.get("type_slug")]),(0,r.createElement)(t||c.Z,n)})},5410:(e,t,n)=>{n.d(t,{BU:()=>u,PP:()=>d,B6:()=>p});var r=n(74512),o=n(32735),i=n(15062),a=n(26433),l=n(69165),s=n(17030);let u=(0,i.$j)((e,{site:t})=>({branches:(0,l.Un)(e,t),buildHooks:(0,a.Kr)(e,t)}),(e,{site:t})=>({onLoad:()=>{e((0,a.xF)(t)),e((0,l.WV)(t))},onAdd:n=>e((0,a.HN)(t,n)),onRemove:n=>e((0,a.$T)(t,n))}))(e=>((0,o.useEffect)(()=>{e.onLoad()},[]),(0,r.jsx)(s.Z,{...e})));var c=n(78129);let d=(0,i.$j)((e,{site:t})=>({deployKey:(0,l.mY)(e,t)}),(e,{state:t,site:n})=>({onLoad:()=>{let t=n.get("build_settings").get("deploy_key_id");t&&e((0,l.rC)(t,n))},onAdd:()=>e((0,l.G$)())}))(e=>(0,r.jsx)(c.Z,{...e}));var g=n(43086);let p=(0,i.$j)((e,t)=>({}),(e,{site:t})=>({onLoad:()=>{t.get("snippets")||e((0,l.Cu)(t))},onAdd:n=>e((0,l.IS)(t,n)),onRemove:n=>e((0,l.UQ)(t,n))}))(e=>((0,o.useEffect)(()=>{e.onLoad(e.site)},[]),e.children?(0,o.cloneElement)(e.children,{...e}):(0,r.jsx)(g.Z,{...e})))},57779:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(32735),o=n(15062),i=n(69165),a=n(93846),l=n(37903);let s=(0,o.$j)((e,{site:t})=>({branches:(0,i.Un)(e,t),splits:(0,a.Fz)(e,t)}),e=>({onLoad:t=>{e((0,a.Dk)(t)),e((0,i.WV)(t))},onCreate:(t,n)=>e((0,a.vj)(t,n)),onUpdate:(t,n,r)=>e((0,a.af)(t,n,r)),onStart:(t,n)=>e((0,a.m6)(t,n)),onStop:(t,n)=>e((0,a.VO)(t,n)),onUpdateSite:(t,n)=>e((0,i.L3)(t,n))}))(({component:e,...t})=>{let{onLoad:n,site:o}=t;return(0,r.useEffect)(()=>{n(o)},[]),(0,r.createElement)(e||l.Z,t)})}}]);